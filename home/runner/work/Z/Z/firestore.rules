rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {
    
    // Allow everything for any authenticated user
    // The {document=**} wildcard covers all collections and subcollections
    match /{document=**} {
      allow read, write: if request.auth != null;
    }
    
    // Allow public read access for posts and user profiles
    // This overrides the general write rule for read operations on these paths
    match /posts/{post} { allow read: if true; }
    match /users/{user} { allow read: if true; }
  }
}
